import 'package:flutter/material.dart';

class CondominiumScreen extends StatelessWidget {
  final Map<String, dynamic> condominium = {
    "id": "ac7bb731-882f-4989-8e5c-506c2eef6161",
    "name": "Vista Verde2",
    "address": "Av. Banzer",
    "latitude": "17.898989",
    "longitude": "-18.020393",
    "pantry": "10.000000",
    "image": "https://via.placeholder.com/150",
    "meter_number": "3A",
    "isActive": true,
    "number_of_apartments": 3,
    "created_at": "2024-05-01T22:04:56.281Z",
    "updated_at": "2024-05-01T22:04:56.281Z",
    "owner": [],
    "technical": [
      {
        "id": "4bcb7b45-662a-4ba6-a425-635eb027da3d",
        "specialty": "ingeniero informatico",
        "contract_date": "2024-04-20"
      },
      {
        "id": "f5720a3a-fdad-4b0a-b25d-4c4c686bbe84",
        "specialty": "ingeniero informatico2",
        "contract_date": "2024-04-20"
      }
    ],
    "payment": [
      {
        "id": "1ae60c9d-a9bd-4e1b-9396-69110a252a93",
        "month": "Septiembre",
        "cubic_meter_consumption": "18.000000",
        "total_amount": "30.000000",
        "file_payment": null,
        "isActive": true,
        "payment_date": null,
        "date_issue": "2024-04-01",
        "date_cutoff": "2024-04-30",
        "state": 1,
        "year": 2024,
        "created_at": "2024-07-25T03:37:00.615Z",
        "updated_at": "2024-07-25T03:37:00.615Z"
      },
      {
        "id": "668bbe91-a385-4d80-845a-6a256e922860",
        "month": "Marzo",
        "cubic_meter_consumption": "18.000000",
        "total_amount": "30.000000",
        "file_payment": null,
        "isActive": true,
        "payment_date": null,
        "date_issue": "2024-04-01",
        "date_cutoff": "2024-04-30",
        "state": 1,
        "year": 2024,
        "created_at": "2024-07-25T03:35:59.495Z",
        "updated_at": "2024-07-25T03:35:59.495Z"
      },
      {
        "id": "9097c710-1753-476e-a2a1-ee0bbdf91d7d",
        "month": "Abril",
        "cubic_meter_consumption": "18.000000",
        "total_amount": "30.000000",
        "file_payment": null,
        "isActive": true,
        "payment_date": null,
        "date_issue": "2024-04-01",
        "date_cutoff": "2024-04-30",
        "state": 1,
        "year": 2024,
        "created_at": "2024-07-25T03:35:52.399Z",
        "updated_at": "2024-07-25T03:35:52.399Z"
      },
      {
        "id": "59485248-4cc4-4d01-92ff-5c0df30783bc",
        "month": "Abril",
        "cubic_meter_consumption": "18.000000",
        "total_amount": "20.000000",
        "file_payment": null,
        "isActive": true,
        "payment_date": null,
        "date_issue": "2024-04-01",
        "date_cutoff": "2024-04-30",
        "state": 1,
        "year": 2024,
        "created_at": "2024-07-25T03:35:50.064Z",
        "updated_at": "2024-07-25T03:35:50.064Z"
      },
      {
        "id": "8ce6319b-2c29-43c4-9a31-200b0698d0b3",
        "month": "Abril",
        "cubic_meter_consumption": "18.000000",
        "total_amount": "12.000000",
        "file_payment": null,
        "isActive": true,
        "payment_date": null,
        "date_issue": "2024-04-01",
        "date_cutoff": "2024-04-30",
        "state": 1,
        "year": 2024,
        "created_at": "2024-07-25T03:35:46.963Z",
        "updated_at": "2024-07-25T03:35:46.963Z"
      },
      {
        "id": "7a453583-8c21-4d9c-85fe-91a7c51c4431",
        "month": "Abril",
        "cubic_meter_consumption": "18.000000",
        "total_amount": "180.000000",
        "file_payment": null,
        "isActive": true,
        "payment_date": null,
        "date_issue": "2024-04-01",
        "date_cutoff": "2024-04-30",
        "state": 1,
        "year": 2024,
        "created_at": "2024-07-25T03:35:39.726Z",
        "updated_at": "2024-07-25T03:35:39.726Z"
      },
      {
        "id": "0653e69e-ba72-4265-b771-97d5ac4d7df2",
        "month": "Abril",
        "cubic_meter_consumption": "12.000000",
        "total_amount": "25.990000",
        "file_payment": null,
        "isActive": true,
        "payment_date": null,
        "date_issue": "2024-04-01",
        "date_cutoff": "2024-04-30",
        "state": 1,
        "year": 2024,
        "created_at": "2024-07-24T22:18:37.284Z",
        "updated_at": "2024-07-24T22:18:37.284Z"
      }
    ],
    "department": [
      {
        "id": "805230f0-eff4-43a8-81fa-0c89fce52151",
        "block": "A",
        "floor": 12,
        "number_department": 123,
        "guest_number": 5,
        "bedroom_number": 4,
        "isActive": true,
        "created_at": "2024-05-01T22:11:36.161Z",
        "updated_at": "2024-05-01T22:11:36.161Z"
      },
      {
        "id": "0bfa1bb2-274d-468d-b8db-23a0203982ed",
        "block": "B",
        "floor": 12,
        "number_department": 1234,
        "guest_number": 2,
        "bedroom_number": 4,
        "isActive": true,
        "created_at": "2024-05-02T00:00:25.472Z",
        "updated_at": "2024-05-02T00:00:25.472Z"
      },
      {
        "id": "6301bb45-c969-4360-92a4-09a38a52e2a5",
        "block": "C",
        "floor": 2,
        "number_department": 23,
        "guest_number": 2,
        "bedroom_number": 2,
        "isActive": true,
        "created_at": "2024-05-27T02:30:54.163Z",
        "updated_at": "2024-05-27T02:30:54.163Z"
      }
    ],
    "pay": [
      {
        "id": "924d46ca-0cb1-4786-9e8f-c041a474835b",
        "month": "Septiembre",
        "year": 2024,
        "isActive": true,
        "pay_of_service": "12.743363",
        "total_to_pay": "22.743363",
        "porcent": "42.477876",
        "pantry": "10.000000",
        "consummation": "120.000000",
        "state": 1,
        "reverse": false,
        "create_at": "2024-07-25T23:38:47.555Z",
        "update_at": "2024-07-25T23:38:47.555Z"
      },
      {
        "id": "0cf38e9e-312b-446a-b5e6-3745cf3aff7d",
        "month": "Septiembre",
        "year": 2024,
        "isActive": true,
        "pay_of_service": "15.929204",
        "total_to_pay": "25.929204",
        "porcent": "53.097345",
        "pantry": "10.000000",
        "consummation": "150.000000",
        "state": 2,
        "reverse": false,
        "create_at": "2024-07-25T23:38:47.531Z",
        "update_at": "2024-07-25T23:38:47.531Z"
      },
      {
        "id": "4338ae6c-401b-4d89-9275-27f21b0f9be8",
        "month": "Septiembre",
        "year": 2024,
        "isActive": true,
        "pay_of_service": "1.327434",
        "total_to_pay": "11.327434",
        "porcent": "4.424779",
        "pantry": "10.000000",
        "consummation": "12.500000",
        "state": 2,
        "reverse": false,
        "create_at": "2024-07-25T23:38:47.549Z",
        "update_at": "2024-07-25T23:38:47.549Z"
      }
    ]
  };

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Condominium Details'),
      ),
      body: SingleChildScrollView(
        child: Padding(
          padding: const EdgeInsets.all(8.0),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              Text(
                condominium['name'],
                style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
              ),
              SizedBox(height: 10),
              Image.network(condominium['image']),
              SizedBox(height: 20),
              Text(condominium['address']),
              // _buildSectionTitle('Technicals'),
              // _buildTechnicalList(condominium['technical']),
              _buildSectionTitle('Payments'),
              _buildPaymentList(condominium['payment']),
              _buildSectionTitle('Departments'),
              _buildDepartmentList(condominium['department']),
              _buildSectionTitle('Service Payments'),
              _buildPayList(condominium['pay']),
            ],
          ),
        ),
      ),
    );
  }

  Widget _buildSectionTitle(String title) {
    return Padding(
      padding: const EdgeInsets.all(8.0),
      child: Text(
        title,
        style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold),
      ),
    );
  }

  Widget _buildTechnicalList(List<dynamic> technicals) {
    if (technicals.isEmpty) {
      return Padding(
        padding: const EdgeInsets.all(8.0),
        child: Text('No Technicals Available'),
      );
    }

    return Column(
      children: technicals.map<Widget>((technical) {
        return ListTile(
          title: Text(technical['specialty']),
          subtitle: Text('Contract Date: ${technical['contract_date']}'),
          trailing: Icon(Icons.chevron_right),
          onTap: () {
            // Add your onTap functionality here
          },
        );
      }).toList(),
    );
  }

  Widget _buildPaymentList(List<dynamic> payments) {
    if (payments.isEmpty) {
      return Padding(
        padding: const EdgeInsets.all(8.0),
        child: Text('No Payments Available'),
      );
    }

    return Column(
      children: payments.map<Widget>((payment) {
        return ExpansionTile(
          title: Text('Month: ${payment['month']}'),
          children: [
            Padding(
              padding: const EdgeInsets.all(8.0),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text('Cubic Meter Consumption: ${payment['cubic_meter_consumption']}'),
                  Text('Total Amount: ${payment['total_amount']}'),
                  Text('Date Issue: ${payment['date_issue']}'),
                  Text('Date Cutoff: ${payment['date_cutoff']}'),
                ],
              ),
            ),
          ],
        );
      }).toList(),
    );
  }

  Widget _buildDepartmentList(List<dynamic> departments) {
    if (departments.isEmpty) {
      return Padding(
        padding: const EdgeInsets.all(8.0),
        child: Text('No Departments Available'),
      );
    }

    return Column(
      children: departments.map<Widget>((department) {
        return ExpansionTile(
          title: Text('Block: ${department['block']}'),
          children: [
            Padding(
              padding: const EdgeInsets.all(8.0),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text('Floor: ${department['floor']}'),
                  Text('Number Department: ${department['number_department']}'),
                  Text('Guest Number: ${department['guest_number']}'),
                  Text('Bedroom Number: ${department['bedroom_number']}'),
                ],
              ),
            ),
          ],
        );
      }).toList(),
    );
  }

  Widget _buildPayList(List<dynamic> pays) {
    if (pays.isEmpty) {
      return Padding(
        padding: const EdgeInsets.all(8.0),
        child: Text('No Service Payments Available'),
      );
    }

    return Column(
      children: pays.map<Widget>((pay) {
        return ListTile(
          title: Text('Month: ${pay['month']}'),
          subtitle: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              Text('Year: ${pay['year']}'),
              Text('Total to Pay: ${pay['total_to_pay']}'),
              Text('Percentage: ${pay['porcent']}'),
              Text('Consumption: ${pay['consummation']}'),
            ],
          ),
          // trailing: Icon(Icons.chevron_right),
          onTap: () {
            // Add your onTap functionality here
          },
        );
      }).toList(),
    );
  }
}
